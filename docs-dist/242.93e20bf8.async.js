"use strict";(self.webpackChunksolo_form=self.webpackChunksolo_form||[]).push([[242],{69242:function(ar,te,b){b.r(te),b.d(te,{default:function(){return lr},useForm:function(){return rr}});var N=b(50959),ie=(0,N.createContext)({}),oe=(0,N.createContext)({}),L=function(){return(0,N.useContext)(ie)},M=function(){return(0,N.useContext)(oe)},ge=b(57213),A=b.n(ge),Re=b(84875),I=b.n(Re),xe=b(52510),Q=b.n(xe),pe=b(54306),O=b.n(pe),be=b(65854),X=b.n(be),de=b(49083),ne=b(80320),q=b(54029),ee=b(56052);function ue(m,e){var d,a;if(e.type==="object")return a=(0,ne.Z)(e),a;var v={},i=(0,ne.Z)(m)||{};v=(d=i==null?void 0:i.properties)!==null&&d!==void 0?d:{};var f=Object.keys(e);return f.forEach(function(h){var o=(0,q.Z)(v,h),E=(0,q.Z)(e,h),n=A()(A()({},o==null?void 0:o.props),E==null?void 0:E.props);if(v[h]=A()(A()(A()({},o),E),{},{props:n}),h==="itemProps"){var t=(0,q.Z)(i,h);i[h]=A()(A()({},t),E)}}),i.properties=v,i}function J(m,e){var d={isError:!1,message:""};return m==null||m.forEach(function(a){a.required&&!d.isError&&(d.isError=(0,ee.Z)(e)?e.reduce(function(v,i){return v&&(v=!i&&i!==0),v},!0):!e&&e!==0,d.message=a.message),a.pattern&&!d.isError&&(d.isError=!a.pattern.test(e),d.message=a.message),a.validator&&!d.isError&&(d.isError=!a.validator(e),d.message=a.message)}),d}var je=b(12342),De=b.n(je),ye=b(34905),l=b(11527),Ae=["text"];function Y(m){var e=m.text,d=De()(m,Ae);return(0,l.jsx)(ye.Z,A()(A()({title:e,placement:"bottom"},d),{},{children:d.children?d.children:(0,l.jsx)("img",{width:14,className:"solo-tips-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA4hJREFUeF7tm+Fx3iAMhk0WazJG0xmaLpBck0sWaDpD0zHqLhZ6wob4swEh8wrju/pHfsT2B3oQL0LIZmhwPf/8fT28v19TU8aYT4sm3f+GYRjpj7X277I7D9++PGp3z2g1QEYba78Pw+CN3NWUtfaJXtSCAQWAMjpDaiQvQcKAAGhg+IYJeQYCRBWAIwxfkkBMj90AXl7f/tTO712iEHmpxhvEAOZRJ+O7u6wxNw9fP7sVpfQSAXj+8evRGEPK3u0l9YZiAGcw3o+KBEIRgDMZL4XAAjij8RIIWQBnNr4UQhKAktpPMb8xU3i7Umy/Z5j3C1Uh9EW8kFkdkgBeXt8sUOpHMlqyRM3eRxsnCIj7u9uordF/gl1/vL+7vdkLE9iXaD82AIAN0vYWEq+j+hQLlDQBVI382mNAofemTxcAUKSp86k5R/ec2FFyZMoXhERIbneHEuW1F1wAQAlfzvU5yLl3NbwgAOA6JhGx1OiXtpHa1Gh4QQAAopsVPoGHRfUDBYBykH5lWgKArPspFy4d/RDBRYIXIICgUQ6AtHO56ZByX6mHZX4HM1Az4H4BJGIIwTTiZMtNAwcA+KPJ5U/aRkxIkVPAL9UG6f4z8lRKShLTx0UQnJGiaaYBgHM99j5KSLmGqJ3uADCBEEQAl7mCrgDURJDcaCfuj0a6PO1siH2N2zlKRZRtcHqgDwCc8QpC7fk4ANB5VUg+PMYZr+2hhwI42ni3JdcmnPKIHow/VAMa7PtLZuNxIlibMyixjnvmsECoVaTXLYAeRn/ORT4Z9A6Lo+53YbHnWi/Jbgqgt8NnAkCe6AG0LHfRzveVjEHIXU4Zoammr2XZCyJnUGQoF4fAk6JVvWr4shdieFq8oQ01TW3T4o2nQTguX9QENCu+WsYh66MxdTHsIQhaxiGXh6MNxDB3aNpiY7YegM3xuHInskfmiokPpxcx79vWB+h6Qf8A5shQSwsOA5DSnlZFUmwKTNv9RUVS2tGhK3O/uhqpaqzFMpgrov5fKMmFU9quybVfc5/LO7qkaEkDZ4RQYnwxAKcJ4JPZEvB7nyk1XgTgLBAkxosBaK8Oe0fcv6f+ycyyg51Nid1VqUUimBoZguDc6LjviMRV6GtbqgD4HzvAG6oN932HAFiBgNX4RzwPZrgKgLVGgKYH3OhlP6EewGlFoP7xCf3F5/N0P3xCP+8ValcG7v1/rujhjyIhgjYAAAAASUVORK5CYII=",alt:""})}))}var G=function(e,d){var a=(0,N.useRef)(!1);(0,N.useLayoutEffect)(function(){return function(){a.current=!1}},[]),(0,N.useLayoutEffect)(function(){if(!a.current)a.current=!0;else return e()},d)},Ee=b(67811),Se=function(e,d,a){var v=(0,N.useRef)(e);v.current=e;var i=(0,N.useMemo)(function(){return(0,Ee.Z)(function(){return v.current.apply(v,arguments)},d||1e3,a)},[]);return i},Ne=de.Z.TextArea;function ve(m){var e=Object.assign({},(X()(m),m)),d=M(),a=d.formData,v=d.ruleResult,i=L(),f=i.watch,h=i.setData,o=i.getFieldRules,E=e.label,n=e.fieldKey,t=e.props,p=e.format,R=e.bordered,x=e.isRequired,g=e.labelTips,S=a==null?void 0:a[n],c=v==null?void 0:v[n],T=(0,N.useState)(S),F=O()(T,2),Z=F[0],K=F[1],j=o==null?void 0:o(n);G(function(){K(S)},[S]);var D=(0,N.useState)({}),C=O()(D,2),s=C[0],r=C[1];G(function(){r(c)},[c]);var P=Se(function(){h==null||h(Q()({},n,Z))},600);function U(y){K(y),P(),f&&f[n]&&f[n](y),f&&f["#"]&&f["#"](y,n)}function W(){var y=J(j||[],Z);(s.isError!==y.isError||s.message!==y.message)&&r(y),f&&f[n]&&f[n](Z),f&&f["#"]&&f["#"](Z,n)}var u=I()("solo-form-item",{"solo-form-item-border":R},{"solo-form-item-disabled":t==null?void 0:t.disabled},{"solo-form-item-error-border":(s==null?void 0:s.isError)&&R});return(0,l.jsxs)("div",{className:u,children:[(0,l.jsxs)("div",{className:I()("label-title",{required:x}),style:{width:e.labelWidth},children:[(0,l.jsx)("span",{children:E}),g?(0,l.jsx)(Y,{text:g}):null]}),s!=null&&s.isError&&R?(0,l.jsxs)("div",{className:"error-message",children:[" ",s==null?void 0:s.message," "]}):null,(0,l.jsxs)("div",{className:I()("flex-full",{"solo-form-item-error":(s==null?void 0:s.isError)&&!R}),children:[s!=null&&s.isError&&!R?(0,l.jsxs)("div",{className:"error-message",children:[" ",s==null?void 0:s.message," "]}):null,p==="textarea"?(0,l.jsx)(Ne,A()(A()({bordered:!R,className:I()("full-width",{"solo-border-error":s==null?void 0:s.isError})},t),{},{onChange:function(B){var V,w,H;return U((V=B==null||(w=B.target)===null||w===void 0||(H=w.value)===null||H===void 0?void 0:H.trim())!==null&&V!==void 0?V:"")},value:Z,onBlur:W})):(0,l.jsx)(de.Z,A()(A()({className:I()("full-width",{"solo-border-error":s==null?void 0:s.isError}),bordered:!R},t),{},{value:Z,onChange:function(B){return U(B.target.value)},onBlur:W}))]})]})}var Fe=b(2095);function Ie(m){var e=Object.assign({},(X()(m),m)),d=M(),a=d.formData,v=d.ruleResult,i=e.props,f=e.label,h=e.fieldKey,o=e.options,E=o===void 0?[]:o,n=e.bordered,t=e.isRequired,p=e.labelTips,R=L(),x=R.watch,g=R.setData,S=R.getFieldRules,c=a==null?void 0:a[h],T=(0,N.useState)(c),F=O()(T,2),Z=F[0],K=F[1],j=S==null?void 0:S(h),D=v==null?void 0:v[h],C=(0,N.useState)({}),s=O()(C,2),r=s[0],P=s[1];G(function(){K(c)},[c]),G(function(){P(D)},[D]);function U(u){K(u),g==null||g(Q()({},h,u)),x&&x[h]&&x[h](u),x&&x["#"]&&x["#"](u,h);var y=J(j||[],u);(r.isError!==y.isError||r.message!==y.message)&&P(y)}var W=I()("solo-form-item",{"solo-form-item-border":n},{"solo-form-item-disabled":i==null?void 0:i.disabled},{"solo-form-item-error-border":(r==null?void 0:r.isError)&&n});return(0,l.jsxs)("div",{className:W,children:[(0,l.jsxs)("div",{className:I()("label-title",{required:t}),style:{width:e.labelWidth,textAlign:e.labelAlign},children:[(0,l.jsx)("span",{children:f}),p?(0,l.jsx)(Y,{text:p}):null]}),r!=null&&r.isError&&n?(0,l.jsxs)("div",{className:"error-message",children:[" ",r==null?void 0:r.message," "]}):null,(0,l.jsxs)("div",{className:I()("flex-full",{"solo-form-item-error":(r==null?void 0:r.isError)&&!n}),children:[r!=null&&r.isError&&!n?(0,l.jsxs)("div",{className:"error-message",children:[" ",r==null?void 0:r.message," "]}):null,(0,l.jsx)(Fe.Z,A()({value:Z,className:I()("full-width",{"solo-border-error":r==null?void 0:r.isError}),onChange:U,bordered:!n,options:E},i))]})]})}var Ke=b(23970),Ze=Ke.ZP.Group;function Ce(m){var e=Object.assign({},(X()(m),m)),d=M(),a=d.formData,v=d.ruleResult,i=e.props,f=e.options,h=f===void 0?[]:f,o=e.fieldKey,E=e.label,n=e.bordered,t=e.isRequired,p=e.labelTips,R=L(),x=R.setData,g=R.watch,S=R.getFieldRules,c=a==null?void 0:a[o],T=S==null?void 0:S(o),F=(0,N.useState)(c),Z=O()(F,2),K=Z[0],j=Z[1],D=v==null?void 0:v[o],C=(0,N.useState)({}),s=O()(C,2),r=s[0],P=s[1];G(function(){j(c)},[c]),G(function(){P(D)},[D]);function U(u){var y,B,V=(y=u==null||(B=u.target)===null||B===void 0?void 0:B.value)!==null&&y!==void 0?y:"";j(V),x==null||x(Q()({},o,V)),g&&g[o]&&g[o](V),g&&g["#"]&&g["#"](V,o);var w=J(T||[],V);(r.isError!==w.isError||r.message!==w.message)&&P(w)}var W=I()("solo-form-item",{"solo-form-item-border":n},{"solo-form-item-disabled":i==null?void 0:i.disabled},{"solo-form-item-error-border":(r==null?void 0:r.isError)&&n});return(0,l.jsxs)("div",{className:W,children:[(0,l.jsxs)("div",{className:I()("label-title",{required:t}),style:{width:e.labelWidth},children:[(0,l.jsx)("span",{children:E}),p?(0,l.jsx)(Y,{text:p}):null]}),r!=null&&r.isError&&n?(0,l.jsxs)("div",{className:"error-message",children:[" ",r==null?void 0:r.message," "]}):null,(0,l.jsxs)("div",{className:I()("flex-full",{"solo-form-item-error":(r==null?void 0:r.isError)&&!n}),children:[r!=null&&r.isError&&!n?(0,l.jsxs)("div",{className:"error-message",children:[" ",r==null?void 0:r.message," "]}):null,(0,l.jsx)(Ze,A()(A()({value:K,className:"ml-10 full-width",onChange:U},i),{},{options:h}))]})]})}var Be=b(81983),Te=Be.Z.Group;function Pe(m){var e=Object.assign({},(X()(m),m)),d=M(),a=d.formData,v=d.ruleResult,i=e.props,f=e.options,h=f===void 0?[]:f,o=e.fieldKey,E=e.label,n=e.bordered,t=e.isRequired,p=e.labelTips,R=L(),x=R.setData,g=R.watch,S=R.getFieldRules,c=a==null?void 0:a[o],T=(0,N.useState)((0,ee.Z)(c)?c:[c]),F=O()(T,2),Z=F[0],K=F[1],j=S==null?void 0:S(o),D=v==null?void 0:v[o],C=(0,N.useState)({}),s=O()(C,2),r=s[0],P=s[1];G(function(){K((0,ee.Z)(c)?c:[c])},[c]),G(function(){P(D)},[D]);function U(u){K(u),x==null||x(Q()({},o,u)),g&&g[o]&&g[o](u),g&&g["#"]&&g["#"](u,o);var y=J(j||[],u);(r.isError!==y.isError||r.message!==y.message)&&P(y)}var W=I()("solo-form-item",{"solo-form-item-border":n},{"solo-form-item-disabled":i==null?void 0:i.disabled},{"solo-form-item-error-border":(r==null?void 0:r.isError)&&n});return(0,l.jsxs)("div",{className:W,children:[(0,l.jsxs)("div",{className:I()("label-title",{required:t}),style:{width:e.labelWidth},children:[(0,l.jsx)("span",{children:E}),p?(0,l.jsx)(Y,{text:p}):null]}),r!=null&&r.isError&&n?(0,l.jsxs)("div",{className:"error-message",children:[" ",r==null?void 0:r.message," "]}):null,(0,l.jsxs)("div",{className:I()("flex-full",{"solo-form-item-error":(r==null?void 0:r.isError)&&!n}),children:[r!=null&&r.isError&&!n?(0,l.jsxs)("div",{className:"error-message",children:[" ",r==null?void 0:r.message," "]}):null,(0,l.jsx)(Te,A()(A()({value:Z,className:"ml-10 full-width",onChange:U},i),{},{options:h}))]})]})}var we=b(52053),z=b.n(we),ce=b(99683),He=b(69581),Oe=b(35465),sr=b(19238),fe=He.Z.generatePicker(Oe.Z);function Ve(m){var e=Object.assign({},(X()(m),m)),d=M(),a=d.formData,v=d.ruleResult,i=L(),f=i.watch,h=i.setData,o=i.getFieldRules,E=e.label,n=e.fieldKey,t=e.props,p=e.bordered,R=e.isRequired,x=e.labelTips,g=a==null?void 0:a[n],S=(0,N.useState)(g),c=O()(S,2),T=c[0],F=c[1],Z=o==null?void 0:o(n),K=v==null?void 0:v[n],j=T?z()(T):void 0,D=(0,N.useState)({}),C=O()(D,2),s=C[0],r=C[1];G(function(){F(g?z()(g):void 0)},[g]),G(function(){r(K)},[K]);function P(W,u){F(u?z()(u):null),h==null||h(Q()({},n,u)),f&&f[n]&&f[n](u),f&&f["#"]&&f["#"](u,n);var y=J(Z||[],u);(s.isError!==y.isError||s.message!==y.message)&&r(y)}var U=I()("solo-form-item",{"solo-form-item-border":p},{"solo-form-item-disabled":t==null?void 0:t.disabled},{"solo-form-item-error-border":(s==null?void 0:s.isError)&&p});return(0,l.jsxs)("div",{className:U,children:[(0,l.jsxs)("div",{className:I()("label-title",{required:R}),style:{width:e.labelWidth},children:[(0,l.jsx)("span",{children:E}),x?(0,l.jsx)(Y,{text:x}):null]}),s!=null&&s.isError&&p?(0,l.jsxs)("div",{className:"error-message",children:[" ",s==null?void 0:s.message," "]}):null,(0,l.jsxs)("div",{className:I()("flex-full",{"solo-form-item-error":(s==null?void 0:s.isError)&&!p}),children:[s!=null&&s.isError&&!p?(0,l.jsxs)("div",{className:"error-message",children:[" ",s==null?void 0:s.message," "]}):null,(0,l.jsx)(fe,A()({className:I()("full-width",{"solo-border-error":s==null?void 0:s.isError}),locale:ce.Z,onChange:P,value:j,bordered:!p},t))]})]})}var Ge=b(46490);function Ue(m){var e=Object.assign({},(X()(m),m)),d=M(),a=d.formData,v=e.props,i=e.fieldKey,f=e.label,h=e.bordered,o=e.labelTips,E=L(),n=E.setData,t=E.watch,p=a==null?void 0:a[i],R=(0,N.useState)(p),x=O()(R,2),g=x[0],S=x[1];G(function(){S(p)},[p]);function c(F){S(F),n==null||n(Q()({},i,F)),t&&t[i]&&t[i](F),t&&t["#"]&&t["#"](F,i)}var T=I()("solo-form-item",{"solo-form-item-border":h},{"solo-form-item-disabled":v==null?void 0:v.disabled});return(0,l.jsxs)("div",{className:T,children:[(0,l.jsxs)("div",{className:I()("label-title"),style:{width:e.labelWidth},children:[(0,l.jsx)("span",{children:f}),o?(0,l.jsx)(Y,{text:o}):null]}),(0,l.jsx)("div",{className:I()("flex-full"),children:(0,l.jsx)(Ge.Z,A()({checked:g,className:"ml-10",onChange:c},v))})]})}var We=b(53028);function $e(m){var e=Object.assign({},(X()(m),m)),d=M(),a=d.formData,v=e.props,i=e.fieldKey,f=e.label,h=e.bordered,o=e.labelTips,E=L(),n=E.setData,t=E.watch,p=a==null?void 0:a[i],R=(0,N.useState)(p),x=O()(R,2),g=x[0],S=x[1];G(function(){S(p)},[p]);function c(F){S(F),n==null||n(Q()({},i,F)),t&&t[i]&&t[i](F),t&&t["#"]&&t["#"](F,i)}var T=I()("solo-form-item",{"solo-form-item-border":h},{"solo-form-item-disabled":v==null?void 0:v.disabled});return(0,l.jsxs)("div",{className:T,children:[(0,l.jsxs)("div",{className:"label-title",style:{width:e.labelWidth},children:[(0,l.jsx)("span",{children:f}),o?(0,l.jsx)(Y,{text:o}):null]}),(0,l.jsx)("div",{className:"flex-full",children:(0,l.jsx)(We.Z,A()({value:g,className:"ml-10 full-width",onChange:c},v))})]})}var Qe=fe.RangePicker;function Le(m){var e,d,a=Object.assign({},(X()(m),m)),v=M(),i=v.formData,f=v.ruleResult,h=L(),o=h.watch,E=h.setData,n=h.getFieldRules,t=a.label,p=a.fieldKey,R=a.props,x=a.bordered,g=a.isRequired,S=a.bind,c=S===void 0?["start","end"]:S,T=a.labelTips,F=(R==null||(e=R.format)===null||e===void 0?void 0:e.indexOf("H"))>=0||(R==null||(d=R.format)===null||d===void 0?void 0:d.indexOf("h"))>=0,Z=i==null?void 0:i[p],K=(0,N.useState)(Z),j=O()(K,2),D=j[0],C=j[1],s=n==null?void 0:n(p),r=f==null?void 0:f[p],P=[];(0,ee.Z)(D)&&(D==null||D.forEach(function(w){P.push(w)})),(0,N.useEffect)(function(){(!c||(c==null?void 0:c.length)<2)&&console.error("Warning: schema ".concat(t,"\u7EC4\u4EF6 bind \u503C\u6709\u8BEF"))},[]);var U=(0,N.useState)({}),W=O()(U,2),u=W[0],y=W[1];G(function(){var w=Z[c[0]]?F?Z[c[0]]:"".concat(Z[c[0]]," 00:00:00"):void 0,H=Z[c[1]]?F?Z[c[1]]:"".concat(Z[c[1]]," 23:59:59"):void 0,$=[w?z()(w):"",H?z()(H):""];C($)},[Z]),G(function(){y(r)},[r]);function B(w,H){var $,k=H[0]?F?H[0]:"".concat(H[0]," 00:00:00"):void 0,re=H[1]?F?H[1]:"".concat(H[1]," 23:59:59"):void 0,_=[k?z()(k):"",re?z()(re):""];C(_);var ae=($={},Q()($,(c==null?void 0:c[0])||"start",k),Q()($,(c==null?void 0:c[1])||"end",re),$);E==null||E(ae),o&&o[p]&&o[p](ae),o&&o["#"]&&o["#"](ae,p);var se=J(s||[],_);(u.isError!==se.isError||u.message!==se.message)&&y(se)}var V=I()("solo-form-item",{"solo-form-item-border":x},{"solo-form-item-disabled":R==null?void 0:R.disabled},{"solo-form-item-error-border":(u==null?void 0:u.isError)&&x});return(0,l.jsxs)("div",{className:V,children:[(0,l.jsxs)("div",{className:I()("label-title",{required:g}),style:{width:a.labelWidth},children:[(0,l.jsx)("span",{children:t}),T?(0,l.jsx)(Y,{text:T}):null]}),u!=null&&u.isError&&x?(0,l.jsxs)("div",{className:"error-message",children:[" ",u==null?void 0:u.message," "]}):null,(0,l.jsxs)("div",{className:I()("flex-full",{"solo-form-item-error":(u==null?void 0:u.isError)&&!x}),children:[u!=null&&u.isError&&!x?(0,l.jsxs)("div",{className:"error-message",children:[" ",u==null?void 0:u.message," "]}):null,(0,l.jsx)(Qe,A()({className:I()("full-width",{"solo-border-error":u==null?void 0:u.isError}),locale:ce.Z,onChange:B,value:D,bordered:!x},R))]})]})}var le=b(88406);function Me(m){var e=Object.assign({},(X()(m),m)),d=M(),a=d.formData,v=d.ruleResult,i=e.props,f=e.fieldKey,h=e.label,o=e.bordered,E=e.isRequired,n=e.bind,t=n===void 0?["start","end"]:n,p=e.labelTips,R=L(),x=R.setData,g=R.watch,S=R.getFieldRules,c=a==null?void 0:a[f],T=(0,N.useState)(c),F=O()(T,2),Z=F[0],K=F[1],j=S==null?void 0:S(f),D=v==null?void 0:v[f],C=(0,N.useState)({}),s=O()(C,2),r=s[0],P=s[1];G(function(){K(c)},[c]),G(function(){P(D)},[D]);function U(u){K(u);var y=(0,ee.Z)(t)?u.reduce(function(V,w,H){var $=t[H];return $&&(0,le.Z)(V,$,w),V},{}):Q()({},f,u);x==null||x(y),g&&g[f]&&g[f](u),g&&g["#"]&&g["#"](u,f);var B=J(j||[],u);(r.isError!==B.isError||r.message!==B.message)&&P(B)}var W=I()("solo-form-item",{"solo-form-item-border":o},{"solo-form-item-disabled":i==null?void 0:i.disabled},{"solo-form-item-error-border":(r==null?void 0:r.isError)&&o});return(0,l.jsxs)("div",{className:W,children:[(0,l.jsxs)("div",{className:I()("label-title",{required:E}),style:{width:e.labelWidth},children:[(0,l.jsx)("span",{children:h}),p?(0,l.jsx)(Y,{text:p}):null]}),r!=null&&r.isError&&o?(0,l.jsxs)("div",{className:"error-message",children:[" ",r==null?void 0:r.message," "]}):null,(0,l.jsxs)("div",{className:I()("flex-full",{"solo-form-item-error":(r==null?void 0:r.isError)&&!o}),children:[r!=null&&r.isError&&!o?(0,l.jsxs)("div",{className:"error-message",children:[" ",r==null?void 0:r.message," "]}):null,(0,l.jsx)(e.widget,A()({value:Z,className:"ml-10 full-width",onChange:U},i))]})]})}var Xe={input:ve,textarea:ve,select:Ie,radio:Ce,checkbox:Pe,datePicker:Ve,switch:Ue,dateRange:Le,rate:$e,custom:Me},Ye=(0,N.memo)(function(e){var d=e.fieldItem,a=d.format,v=Xe[a];return(0,l.jsx)(l.Fragment,{children:v?(0,l.jsx)(v,A()({},d)):null})},function(m,e){return m===e});function Je(){var m,e,d=M(),a=d.schema,v=L(),i=v.setRules,f=(m=a==null?void 0:a.properties)!==null&&m!==void 0?m:{},h=(e=a==null?void 0:a.itemProps)!==null&&e!==void 0?e:{},o=(h==null?void 0:h.display)||"block",E={},n=Object.keys(f).reduce(function(t,p){var R,x=A()(A()(A()({},h),f[p]),{},{fieldKey:p}),g=x.rules;g&&(0,le.Z)(E,x.fieldKey,g);var S=(R=g==null?void 0:g.findIndex(function(c){return c==null?void 0:c.required}))!==null&&R!==void 0?R:-1;return x.isRequired=S>-1,x.hide||t.push(x),t},[]);return i==null||i(E),(0,l.jsx)("div",{className:"solo-form-container",children:n.map(function(t){return(0,l.jsx)("div",{style:{width:t.width},className:I()("solo-form-item-box",{"solo-form-item-textarea":t.format==="textarea"},t.className,"solo-form-".concat((t==null?void 0:t.display)||o)),children:t&&(0,l.jsx)(Ye,{fieldItem:t},t.fieldKey)},t.fieldKey)})})}function ze(m){var e=m.form,d=m.watch,a=e.setData,v=e.getData,i=e.clearData,f=e.getDataByKey,h=e.getFieldRules,o=e.validateField,E=e.setRules,n=e.removeDataByKey,t=(0,N.useMemo)(function(){return{watch:d,setData:a,getData:v,getDataByKey:f,clearData:i,removeDataByKey:n,setRules:E,validateField:o,getFieldRules:h}},[]),p=e.schema,R=e.formData,x=e.ruleResult,g=(0,N.useMemo)(function(){return{formData:R,schema:p,ruleResult:x}},[JSON.stringify(p),JSON.stringify(R),JSON.stringify(x)]);return(0,l.jsx)(ie.Provider,{value:t,children:(0,l.jsx)(oe.Provider,{value:g,children:(0,l.jsx)(Je,{})})})}var ke=b(25359),me=b.n(ke),qe=b(49811),_e=b.n(qe),he=b(35373),er=["rate","switch"];function rr(m){var e=m.schema,d=m.data,a=function(j){return(0,N.useReducer)(function(D,C){return A()(A()({},D),C)},j)},v=a({schema:e,formData:d!=null?d:{},ruleResult:{}}),i=O()(v,2),f=i[0],h=i[1],o=(0,N.useRef)(e),E=function(j){o.current=ue(o.current,j),h({schema:o.current})},n=function(j){var D,C,s=(D=(C=o.current)===null||C===void 0?void 0:C.properties)!==null&&D!==void 0?D:{};(0,he.Z)(s,j),o.current=ue(o.current,s),h({schema:o.current})},t=(0,N.useRef)(d!=null?d:{}),p=function(j){t.current=A()(A()({},t.current),j),h({formData:t.current})},R=function(j,D){t.current=A()(A()({},t.current),{},Q()({},j,D)),console.log("\u{1F680} ~ file: useForm.ts ~ line 42 ~ setDataByKey ~ value",t.current),h({formData:t.current})},x=function(){t.current={},h({formData:t.current})},g=function(){var j=t.current;return A()({},j)},S=function(j){return(0,q.Z)(t.current,j)},c=(0,N.useRef)(),T=function(j){er.forEach(function(D){(0,he.Z)(j,D)}),c.current=j},F=function(j){return c.current&&c.current[j]||[]},Z=function(j){var D,C,s,r={},P=!1,U=j||Object.keys((D=c.current)!==null&&D!==void 0?D:{}),W=(C=(s=o.current)===null||s===void 0?void 0:s.properties)!==null&&C!==void 0?C:{};return U.forEach(function(){var u=_e()(me()().mark(function y(B){var V,w,H,$,k;return me()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:V=(0,q.Z)(c.current,B)||[],w=W[B],H=w==null?void 0:w.bind,$=(0,q.Z)(t.current,(H==null?void 0:H[0])||B),k=J(V,$),(0,le.Z)(r,B,k),k.isError&&(P=!0);case 7:case"end":return _.stop()}},y)}));return function(y){return u.apply(this,arguments)}}()),h({ruleResult:r}),new Promise(function(u,y){if(u({validate:!P,data:g()}),P){var B={validate:!1,data:g()};y(B)}})};return{setSchema:E,removeSchemaByKey:n,setData:p,setDataByKey:R,getData:g,getDataByKey:S,setRules:T,getFieldRules:F,validateFields:Z,clearData:x,schema:f.schema,formData:f.formData,ruleResult:f.ruleResult}}var lr=ze}}]);
